# Руководство по работе с CSV данными

## Обзор

Проект MLBB Helper Website использует CSV файлы для хранения данных о героях, предметах и эмблемах. Это простое и эффективное решение, которое не требует настройки базы данных.

## Структура данных

### 1. Герои (`db_info_csv/hero_stats.csv`)

Файл содержит характеристики всех героев с разделителем `;`:

```csv
hero;assasin;marksman;mage;tank;fighter;support;HP;growth_HP;regen_HP;...
Алукард;1;0;0;0;1;0;2443;225;7.8;0.44;0;0;0;0;123;8.64;21;4.57;...
```

**Основные поля:**
- `hero` - имя героя
- `assasin`, `marksman`, `mage`, `tank`, `fighter`, `support` - роли (1 = да, 0 = нет)
- `HP` - базовое здоровье
- `growth_HP` - прирост здоровья за уровень
- `phys_attack` - базовая физическая атака
- `growth_phys_attack` - прирост физической атаки за уровень
- `move_speed` - скорость передвижения
- `mana/energy` - базовый запас ресурса
- `growth_mana/energy` - прирост ресурса за уровень

### 2. Эмблемы (`csv/emblems.csv`)

Файл содержит информацию об эмблемах:

```csv
emblems;extra_stat1;extra_stat2;extra_stat3
Базовая обычная эмблема;+12 гибридное восстановление;+275 ОЗ;+22 адаптивная атака
Эмблемы танка;+500 ОЗ;+10 гибридная защита;+4 регенерация ОЗ
```

### 3. Предметы (`csv/items.csv`)

Файл содержит характеристики предметов:

```csv
Название предмета;Характеристика 1;Характеристика 2;Характеристика 3
Бесконечная битва;+70 физическая атака;+25% скорость атаки;+15% вампиризм
```

## Работа с данными

### 1. Загрузка данных

```python
from data_manager import data_manager

# Получить всех героев
heroes = data_manager.get_all_heroes()

# Получить героя по имени
hero = data_manager.get_hero_by_name("Алукард")

# Поиск героев
results = data_manager.search_heroes("маг")

# Герои по роли
fighters = data_manager.get_heroes_by_role("Боец")
```

### 2. Характеристики на уровне

```python
# Получить характеристики героя на 15 уровне
stats = data_manager.get_hero_stats_at_level("Алукард", 15)
print(f"HP на 15 уровне: {stats['hp']}")
print(f"Атака на 15 уровне: {stats['phys_attack']}")
```

### 3. Работа с эмблемами и предметами

```python
# Получить все эмблемы
emblems = data_manager.get_emblems()

# Получить все предметы
items = data_manager.get_items()
```

## Добавление новых данных

### 1. Добавление нового героя

1. Откройте файл `db_info_csv/hero_stats.csv`
2. Добавьте новую строку в конец файла
3. Заполните все необходимые поля
4. Сохраните файл

**Пример:**
```csv
Новый герой;0;0;1;0;0;0;2400;200;8.0;0.5;500;100;4;0.2;120;8.0;20;4.0;...
```

### 2. Добавление новой эмблемы

1. Откройте файл `csv/emblems.csv`
2. Добавьте новую строку
3. Укажите название и характеристики
4. Сохраните файл

### 3. Добавление нового предмета

1. Откройте файл `csv/items.csv`
2. Добавьте новую строку
3. Укажите название и характеристики
4. Сохраните файл

## Форматы данных

### 1. Числовые значения
- Целые числа: `123`, `500`, `1000`
- Десятичные числа: `8.64`, `0.44`, `1.54`

### 2. Проценты
- Обычно указываются как числа: `15` (означает 15%)
- Для некоторых полей может быть указано `200` (означает 200%)

### 3. Булевы значения
- `1` - да/истина
- `0` - нет/ложь

## Валидация данных

### 1. Проверка корректности

```python
# Запустите тест для проверки данных
python test_csv_data.py
```

### 2. Типичные ошибки
- Неправильный разделитель (должен быть `;`)
- Отсутствующие поля
- Неправильный формат чисел
- Кодировка файла (должна быть UTF-8)

## Производительность

### 1. Кэширование
- Данные загружаются один раз при запуске приложения
- Все операции выполняются в памяти
- Быстрый доступ к данным

### 2. Оптимизация
- Используйте поиск по индексу для больших файлов
- Группируйте связанные данные
- Минимизируйте количество обращений к файлам

## Резервное копирование

### 1. Автоматическое резервное копирование
```bash
# Создать резервную копию
cp db_info_csv/hero_stats.csv db_info_csv/hero_stats_backup.csv
cp csv/emblems.csv csv/emblems_backup.csv
cp csv/items.csv csv/items_backup.csv
```

### 2. Версионирование
- Используйте Git для отслеживания изменений
- Создавайте теги для важных версий
- Ведите журнал изменений

## Миграция на базу данных

В будущем, когда проект вырастет, можно легко мигрировать на базу данных:

1. Создать скрипт импорта CSV в БД
2. Обновить `data_manager.py` для работы с БД
3. Сохранить CSV как резервные копии
4. Обновить API endpoints

## Поддержка

При возникновении проблем:

1. Проверьте формат CSV файлов
2. Убедитесь в правильной кодировке (UTF-8)
3. Запустите тесты: `python test_csv_data.py`
4. Проверьте логи приложения
5. Убедитесь в корректности разделителей
