# MLBB Helper Website

Веб-приложение для помощи игрокам Mobile Legends: Bang Bang с информацией о героях, предметах и калькуляторами.

## Настройка проекта
1. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```
2. Создайте файл `.env` со следующими переменными:
   ```
   SECRET_KEY=your-secret-key
   DB_NAME=your_db_name
   DB_USER=your_db_user
   DB_PASSWORD=your_db_password
   DB_HOST=localhost
   DB_PORT=5432
   ```
3. Протестируйте работу с данными:
   ```bash
   python test_csv_data.py
   ```
4. Запустите приложение:
   ```bash
   python app.py
   ```
   или
   ```bash
   flask run --host=0.0.0.0 --port=8080
   ```
5. Откройте браузер и перейдите по адресу http://127.0.0.1:8080/

## Настройка среды разработки в VS Code

При работе в VS Code вы можете столкнуться с ошибками импорта, если интерпретатор Python не настроен на виртуальное окружение проекта.

1. Активируйте виртуальное окружение в терминале VS Code:
   ```bash
   source .venv/bin/activate
   ```

2. Выберите интерпретатор из виртуального окружения:
   - Нажмите `Ctrl+Shift+P` (или `Cmd+Shift+P` на macOS)
   - Выберите команду `Python: Select Interpreter`
   - Выберите интерпретатор, который находится в папке `.venv/bin` (например, `.venv/bin/python`)

3. Если ошибки импорта сохраняются, добавьте в файл настроек VS Code (`settings.json`) строку:
   ```json
   "python.analysis.extraPaths": [".venv/lib/python3.11/site-packages"]
   ```
   Замените `python3.11` на вашу версию Python.

4. Если ошибки сохраняются, добавьте для проблемных импортов комментарий `# type: ignore`:
   ```python
   from flask_sqlalchemy import SQLAlchemy  # type: ignore
   ```

5. Перезагрузите VS Code после изменения настроек

## Структура проекта
- `app.py` — основное Flask-приложение и маршруты
- `data_manager.py` — модуль для работы с CSV данными
- `test_csv_data.py` — тест работы с CSV данными
- `CSV_DATA_GUIDE.md` — подробное руководство по работе с CSV данными
- `static/` — статические файлы (JS, CSS, изображения)
- `templates/` — Jinja2-шаблоны
- `data/` — JSON и прочие данные
- `csv/` — CSV-ресурсы
- `db_info_csv/` — CSV файлы с данными о героях
- `gunicorn_config.py` и `wsgi.py` — для продакшен-сервера

## Архитектура данных

Проект использует CSV и JSON файлы для хранения данных о героях, предметах и эмблемах. Это простое и эффективное решение для текущего этапа разработки.

### Преимущества использования CSV/JSON:
- **Простота** - не требует настройки базы данных
- **Портативность** - файлы легко переносить и редактировать
- **Читаемость** - данные можно просматривать в любом текстовом редакторе
- **Быстрый старт** - не нужно настраивать PostgreSQL
- **Гибкость** - легко добавлять новые поля и данные

### Структура данных:
- `db_info_csv/hero_stats.csv` - характеристики героев
- `csv/emblems.csv` - эмблемы и их бонусы
- `csv/items.csv` - предметы и их характеристики
- `data/news.json` - новости и обновления
- `data/roadmap.json` - дорожная карта проекта

## REST API
- GET `/api/heroes` — возвращает JSON-список всех героев
- GET `/api/heroes/search?q=<query>` — поиск героев по запросу
- GET `/api/heroes/<hero_name>` — получение героя по имени
- GET `/api/heroes/role/<role>` — получение героев по роли
- GET `/api/emblems` — возвращает JSON-список эмблем
- GET `/api/items` — возвращает JSON-список предметов

## Работа с медиафайлами

Изображения и другие медиафайлы хранятся локально в директории `media/`:
```
media/
  heroes/
    hero_name_1.jpg
    hero_name_2.png
    ...
```

## Добавление изображений героев

Есть несколько способов добавить изображения героев:

1. **Локально**:
   - Поместите изображения в папку `media/heroes/`
   - Используйте формат имени: `имя_героя_номер.расширение`